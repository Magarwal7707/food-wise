<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Food Wastage Awareness - College Hostels</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#00A699">
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1046/1046857.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --page-bg: #f7f9fc;
      --card: #ffffff;
      --primary: #00A699;
      --primary-dark: #008b7d;
      --text-dark: #222;
      --text-light: #555;
      --border: #e5e7eb;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius: 24px;
      --transition: .3s cubic-bezier(.4,0,.2,1);
    }
    body.dark {
      --page-bg: #121212;
      --card: #1e1e1e;
      --text-dark: #f1f1f1;
      --text-light: #bbb;
      --border: #333;
      --shadow: 0 10px 30px rgba(0,0,0,.4);
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
        font-family: 'Inter', system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        background: var(--page-bg);
        color: var(--text-dark);
        line-height: 1.6;
        min-height: 100vh;
        transition: background var(--transition), color var(--transition);
    }
    header {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: #fff;
        padding: 2rem 1rem 3rem;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    header::after {
        content: '';
        position: absolute;
        inset: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        animation: slide 60s linear infinite;
    }
    @keyframes slide {
        0% { transform: translate(0,0); }
        100% { transform: translate(-60px,-60px); }
    }
    .header-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1.5rem;
        position: relative;
        z-index: 2;
    }
    #logo {
        font-size: clamp(2.5rem, 6vw, 3.8rem);
        font-weight: 800;
        letter-spacing: 1px;
        text-shadow: 2px 2px 0 rgba(0,0,0,.15);
    }
    .theme-toggle {
        background: rgba(255,255,255,.15);
        border: 2px solid rgba(255,255,255,.3);
        color: #fff;
        font-size: 2.2rem;
        cursor: pointer;
        border-radius: 50%;
        width: 52px;
        height: 52px;
        backdrop-filter: blur(4px);
        transition: background var(--transition), transform var(--transition);
    }
    .theme-toggle:active {
        transform: scale(.92);
    }
    .container {
        padding: 0 2vw;
        max-width: 1400px;
        margin: 0 auto;
    }
    .hero-section {
        text-align: center;
        padding: 3rem 1rem;
        margin-bottom: 2rem;
    }
    .hero-title {
        font-size: clamp(2rem, 5vw, 3rem);
        color: var(--primary);
        margin-bottom: 1rem;
        font-weight: 800;
    }
    .hero-subtitle {
        font-size: 1.2rem;
        color: var(--text-light);
        max-width: 600px;
        margin: 0 auto 2rem;
    }
    .back-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
        margin-bottom: 2rem;
        transition: color var(--transition);
    }
    .back-button:hover {
        color: var(--primary-dark);
    }
    .wastage-hero {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        padding: 2.5rem;
        border-radius: 20px;
        margin-bottom: 3rem;
        text-align: center;
        animation: slideInUp 0.8s ease-out;
    }
    .wastage-hero h3 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }
    .wastage-hero p {
        font-size: 1.2rem;
        opacity: 0.9;
    }
    .section {
        margin-bottom: 3rem;
    }
    .section-title {
        text-align: center;
        font-size: 1.8rem;
        color: var(--primary);
        margin-bottom: 2rem;
        font-weight: 700;
    }
    .hostel-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    .hostel-wastage-card {
        background: var(--card);
        border: 1.5px solid var(--border);
        border-radius: 15px;
        padding: 1.5rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        transition: transform var(--transition), box-shadow var(--transition);
    }
    .hostel-wastage-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }
    .hostel-wastage-card::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--primary);
        transform-origin: left;
        animation: wastageBar 3s ease-in-out infinite;
    }
    @keyframes wastageBar {
        0%, 100% { transform: scaleX(0.3); }
        50% { transform: scaleX(0.8); }
    }
    .wastage-value {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--primary-dark);
        margin-bottom: 0.5rem;
    }
    .wastage-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 0.5rem;
        animation: pulse 2s infinite;
    }
    .wastage-indicator.high { background: #e74c3c; }
    .wastage-indicator.medium { background: #f39c12; }
    .wastage-indicator.low { background: #27ae60; }
    @keyframes pulse {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.7; transform: scale(1.2); }
    }
    .impact-section {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
    }
    .impact-card {
        background: var(--card);
        border: 1.5px solid var(--border);
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        transition: transform var(--transition), box-shadow var(--transition);
        position: relative;
        overflow: hidden;
    }
    .impact-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }
    .impact-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    }
    .impact-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }
    .impact-card h4 {
        color: var(--primary);
        margin-bottom: 1rem;
        font-size: 1.3rem;
    }
    .counter {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--primary-dark);
        display: block;
        margin-bottom: 0.5rem;
    }
    .calculator-section {
        background: var(--card);
        border: 1.5px solid var(--border);
        border-radius: 20px;
        padding: 2.5rem;
        margin-bottom: 3rem;
    }
    .calculator-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
    }
    .form-group {
        display: flex;
        flex-direction: column;
    }
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--text-dark);
    }
    .form-group select,
    .form-group input[type="range"] {
        width: 100%;
        padding: 0.8rem;
        border: 2px solid var(--border);
        border-radius: 10px;
        background: var(--page-bg);
        color: var(--text-dark);
        font-size: 1rem;
    }
    .range-value {
        text-align: center;
        font-weight: bold;
        color: var(--primary);
        margin-top: 1rem;
        font-size: 1.1rem;
    }
    .result-section {
        padding: 1.5rem;
        background: rgba(0,166,153,0.1);
        border-radius: 15px;
        display: none;
    }
    .result-section.show {
        display: block;
        animation: slideInUp 0.5s ease-out;
    }
    .result-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }
    .cta-section {
        text-align: center;
        margin-bottom: 3rem;
    }
    .cta-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 2rem;
    }
    .button {
        border: none;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: #fff;
        padding: 1rem 2.2rem;
        border-radius: 30px;
        font-weight: 700;
        font-size: 1.05rem;
        cursor: pointer;
        transition: transform var(--transition), box-shadow var(--transition);
        box-shadow: 0 4px 14px rgba(0, 166, 153, .4);
        text-decoration: none;
        display: inline-block;
    }
    .button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 166, 153, .6);
    }
    .button:active {
        transform: scale(.96);
    }
    .button.secondary {
        background: linear-gradient(135deg, #ff9a44 0%, #e07a3c 100%);
        box-shadow: 0 4px 14px rgba(255, 154, 68, .4);
    }
    .button.secondary:hover {
        box-shadow: 0 6px 20px rgba(255, 154, 68, .6);
    }
    .chart-container {
        background: var(--card);
        border: 1.5px solid var(--border);
        border-radius: 20px;
        padding: 2rem;
        position: relative;
        height: 300px;
        margin-top: 2rem;
    }
    @keyframes slideInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    @keyframes countUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    footer {
        text-align: center;
        padding: 2.5rem 1rem 1.5rem;
        font-size: .98rem;
        color: var(--text-light);
        margin-top: 3rem;
        border-top: 1px solid var(--border);
    }
    @media (max-width: 768px) {
        .container {
            padding: 0 1rem;
        }
        .wastage-hero {
            padding: 1.5rem;
        }
        .hero-title {
            font-size: 2rem;
        }
        .impact-section {
            grid-template-columns: 1fr;
        }
        .calculator-controls {
            grid-template-columns: 1fr;
        }
        .cta-buttons {
            flex-direction: column;
            align-items: center;
        }
        .button {
            width: 100%;
            max-width: 300px;
        }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <span id="logo">Food Waste Awareness</span>
      <button class="theme-toggle" id="themeToggleBtn" title="Toggle dark mode">üåô</button>
    </div>
  </header>

  <main class="container">
    <div class="hero-section">
      <a href="index.html" class="back-button">‚Üê Back to Food Wise</a>
      <h1 class="hero-title">The Hidden Cost of Food Waste in College Hostels</h1>
      <p class="hero-subtitle">Every day, our hostels waste tons of food that could feed hungry students. Learn about the impact and take action to make a difference.</p>
    </div>

    <!-- Hero Statistics Section -->
    <div class="wastage-hero">
      <h3>üö® 20-40 kg Wasted Daily Per Hostel</h3>
      <p>That's equivalent to <span id="dailyMeals">80-160</span> student meals thrown away every single day</p>
    </div>

    <!-- Time-lapse Visualization Section -->
    <section class="section">
      <h2 class="section-title">üìä Live Food Wastage Tracker</h2>
      <div class="hostel-cards" id="hostelCards">
        <!-- Hostel cards will be dynamically generated here -->
      </div>
      <div class="chart-container">
        <canvas id="wastageChart"></canvas>
      </div>
    </section>

    <!-- Environmental Impact Section -->
    <section class="section">
      <h2 class="section-title">üåç Environmental Impact</h2>
      <div class="impact-section">
        <div class="impact-card">
          <div class="impact-icon">üíß</div>
          <h4>Water Wasted</h4>
          <div class="counter" data-target="15000">0</div>
          <p>Liters per month</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon">üí∞</div>
          <h4>Money Lost</h4>
          <div class="counter" data-target="750000">0</div>
          <p>Rupees per month</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon">üåç</div>
          <h4>CO‚ÇÇ Emissions</h4>
          <div class="counter" data-target="2400">0</div>
          <p>Kg per month</p>
        </div>
        <div class="impact-card">
          <div class="impact-icon">‚ö°</div>
          <h4>Energy Wasted</h4>
          <div class="counter" data-target="8500">0</div>
          <p>kWh per month</p>
        </div>
      </div>
    </section>

    <!-- Interactive Calculator Section -->
    <section class="section">
      <h2 class="section-title">üßÆ Calculate Your Impact</h2>
      <div class="calculator-section">
        <div class="calculator-controls">
          <div class="form-group">
            <label for="userHostel">Your Hostel</label>
            <select id="userHostel">
              <option value="Tejas">Tejas</option>
              <option value="Ambaram">Ambaram</option>
              <option value="Vasudha">Vasudha</option>
            </select>
          </div>
          <div class="form-group">
            <label for="skipMeals">Meals You Skip Per Week</label>
            <input type="range" id="skipMeals" min="0" max="21" value="0">
            <div class="range-value"><span id="skipValue">0</span> meals</div>
          </div>
        </div>
        <div class="result-section" id="calculationResult">
          <h3>Your Annual Impact</h3>
          <div class="result-grid">
            <div><strong>Water Saved:</strong> <span id="waterSaved">0</span> liters</div>
            <div><strong>Money Saved:</strong> ‚Çπ<span id="moneySaved">0</span></div>
            <div><strong>CO‚ÇÇ Reduced:</strong> <span id="co2Reduced">0</span> kg</div>
            <div><strong>Meals Available:</strong> <span id="mealsAvailable">0</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Call to Action Section -->
    <section class="section">
      <h2 class="section-title">üéØ Take Action Today</h2>
      <div class="cta-section">
        <div class="cta-buttons">
          <button class="button" onclick="showPledgeModal()">Take the Pledge</button>
          <button class="button secondary" onclick="showShareModal()">Share Awareness</button>
          <a href="index.html" class="button">Start Meal Planning</a>
        </div>
        <p>Every meal planned is a meal saved. Every bite counts!</p>
      </div>
    </section>
  </main>

  <footer>Made with ‚ù§Ô∏è by students, for students. | <a href="index.html" style="color:var(--primary)">Back to Food Wise</a></footer>

  <!-- Modals -->
  <div id="pledgeModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <button class="close" onclick="closeModal('pledgeModal')">&times;</button>
      <h3 style="color:var(--primary);margin-bottom:1.5rem">ü§ù Take the Zero-Waste Pledge</h3>
      <div style="text-align:center">
        <div style="font-size:3rem;margin-bottom:1rem">‚ôªÔ∏è</div>
        <p style="margin-bottom:2rem;font-size:1.1rem">I commit to reducing food waste by planning my meals and only taking what I can finish.</p>
        <button class="button" id="signPledge">Sign the Pledge</button>
      </div>
    </div>
  </div>

  <div id="shareModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <button class="close" onclick="closeModal('shareModal')">&times;</button>
      <h3 style="color:var(--primary);margin-bottom:1.5rem">üì± Share the Message</h3>
      <div style="text-align:center">
        <p style="margin-bottom:2rem">Help spread awareness about food wastage in our college hostels</p>
        <div class="cta-buttons">
          <button class="button" onclick="shareWhatsApp()">WhatsApp</button>
          <button class="button" onclick="shareTwitter()">Twitter</button>
          <button class="button" onclick="copyLink()">Copy Link</button>
        </div>
      </div>
    </div>
  </div>

  <style>
    .modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, .55);
        backdrop-filter: blur(6px);
        align-items: center;
        justify-content: center;
        z-index: 2000;
    }
    .modal.active {
        display: flex;
    }
    .modal-content {
        background: rgba(var(--card), .85);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, .2);
        border-radius: 32px;
        padding: 3.5rem 3rem 2.5rem;
        width: 96vw;
        max-width: 520px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, .25);
        text-align: center;
        position: relative;
        animation: modalPop .4s cubic-bezier(.4, 0, .2, 1);
    }
    @keyframes modalPop {
        from { opacity: 0; transform: scale(.85) translateY(20px); }
        to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .modal-content h3 {
        color: var(--primary);
        margin-bottom: 1.2rem;
        font-size: 1.4rem;
    }
    .close {
        position: absolute;
        top: 1.2rem;
        right: 1.5rem;
        font-size: 2.4rem;
        color: var(--text-light);
        background: none;
        border: none;
        cursor: pointer;
        transition: color var(--transition);
    }
    .close:hover {
        color: var(--accent);
    }
  </style>

  <script>
    // Theme toggle
    const themeBtn = document.getElementById('themeToggleBtn');
    themeBtn.onclick = () => {
      document.body.classList.toggle('dark');
      themeBtn.textContent = document.body.classList.contains('dark') ? 'üåû' : 'üåô';
      localStorage.setItem('fw-theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    };
    if (localStorage.getItem('fw-theme') === 'dark') {
      document.body.classList.add('dark');
      themeBtn.textContent = 'üåû';
    }

    // Modal functions
    function openModal(id) {
      document.getElementById(id).classList.add('active');
    }

    function closeModal(id) {
      document.getElementById(id).classList.remove('active');
    }

    // Click outside modal to close
    window.onclick = (e) => {
      if (e.target.classList.contains('modal')) {
        e.target.classList.remove('active');
      }
    };

    // Generate hostel cards
    function generateHostelCards() {
      const hostels = ['Tejas', 'Ambaram', 'Vasudha'];
      const container = document.getElementById('hostelCards');
      container.innerHTML = '';

      hostels.forEach(hostel => {
        const wastage = 20 + Math.random() * 20; // 20-40kg random
        const level = wastage > 30 ? 'high' : wastage > 25 ? 'medium' : 'low';

        const card = document.createElement('div');
        card.className = 'hostel-wastage-card';
        card.innerHTML = `
          <h4 style="color:var(--primary);margin-bottom:1rem">${hostel} Hostel</h4>
          <div class="wastage-value">${wastage.toFixed(1)} kg</div>
          <div style="color:var(--text-light);margin-bottom:1rem">Daily Average</div>
          <div><span class="wastage-indicator ${level}"></span><span class="wastage-level">${level.charAt(0).toUpperCase() + level.slice(1)} Wastage</span></div>
          <div class="meals-count" style="margin-top:1rem;font-size:0.9rem;color:var(--text-light)">‚âà ${(wastage * 4).toFixed(0)} meals/day</div>
        `;
        container.appendChild(card);
      });

      updateDailyMeals();
    }

    // Update daily meals counter
    function updateDailyMeals() {
      const wastageElements = document.querySelectorAll('.hostel-wastage-card');
      let totalWastage = 0;

      wastageElements.forEach(card => {
        const valueElement = card.querySelector('.wastage-value');
        if (valueElement) {
          const wastageText = valueElement.textContent;
          totalWastage += parseFloat(wastageText);
        }
      });

      const mealsCount = Math.floor(totalWastage * 4);
      const dailyMealsElement = document.getElementById('dailyMeals');
      if (dailyMealsElement) {
        dailyMealsElement.textContent = mealsCount;
      }
    }

    // Start animated counters
    function startCounters() {
      document.querySelectorAll('.counter').forEach(counter => {
        const target = parseInt(counter.dataset.target);
        const increment = target / 100;
        let current = 0;

        const updateCounter = () => {
          current += increment;
          if (current < target) {
            counter.textContent = Math.floor(current).toLocaleString();
            requestAnimationFrame(updateCounter);
          } else {
            counter.textContent = target.toLocaleString();
          }
        };

        // Start animation when element is in viewport
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              updateCounter();
              observer.unobserve(entry.target);
            }
          });
        });

        observer.observe(counter);
      });
    }

    // Initialize time-lapse chart
    function initializeTimeLapseChart() {
      const canvas = document.getElementById('wastageChart');
      if (!canvas) return;

      const ctx = canvas.getContext('2d');
      canvas.width = canvas.offsetWidth;
      canvas.height = 250;

      // Generate sample data for the last 7 days
      const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
      const data = days.map(() => 20 + Math.random() * 20);

      // Simple chart drawing
      const maxValue = Math.max(...data);
      const chartWidth = canvas.width - 60;
      const chartHeight = canvas.height - 40;
      const barWidth = chartWidth / days.length;

      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw bars
      data.forEach((value, index) => {
        const barHeight = (value / maxValue) * chartHeight;
        const x = 30 + index * barWidth;
        const y = canvas.height - 30 - barHeight;

        // Gradient fill
        const gradient = ctx.createLinearGradient(x, y + barHeight, x, y);
        gradient.addColorStop(0, '#00A699');
        gradient.addColorStop(1, '#008b7d');

        ctx.fillStyle = gradient;
        ctx.fillRect(x + barWidth * 0.2, y, barWidth * 0.6, barHeight);

        // Labels
        ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--text-dark');
        ctx.font = '12px Inter';
        ctx.textAlign = 'center';
        ctx.fillText(days[index], x + barWidth / 2, canvas.height - 10);
        ctx.fillText(value.toFixed(1) + 'kg', x + barWidth / 2, y - 5);
      });
    }

    // Setup calculator
    function setupCalculator() {
      const skipSlider = document.getElementById('skipMeals');
      const skipValue = document.getElementById('skipValue');
      const hostelSelect = document.getElementById('userHostel');

      if (skipSlider) {
        skipSlider.addEventListener('input', () => {
          skipValue.textContent = skipSlider.value;
          calculateImpact();
        });
      }

      if (hostelSelect) {
        hostelSelect.addEventListener('change', calculateImpact);
      }

      // Initial calculation
      setTimeout(calculateImpact, 1000);
    }

    function calculateImpact() {
      const skipMeals = parseInt(document.getElementById('skipMeals').value);
      const resultDiv = document.getElementById('calculationResult');

      if (skipMeals > 0) {
        const waterSaved = skipMeals * 52 * 15; // 52 weeks, 15L per meal
        const moneySaved = skipMeals * 52 * 45; // ‚Çπ45 per meal
        const co2Reduced = skipMeals * 52 * 0.8; // 0.8kg CO2 per meal
        const mealsAvailable = skipMeals * 52; // Meals that could feed others

        document.getElementById('waterSaved').textContent = waterSaved.toLocaleString();
        document.getElementById('moneySaved').textContent = moneySaved.toLocaleString();
        document.getElementById('co2Reduced').textContent = co2Reduced.toLocaleString();
        document.getElementById('mealsAvailable').textContent = mealsAvailable.toLocaleString();

        resultDiv.classList.add('show');
      } else {
        resultDiv.classList.remove('show');
      }
    }

    function showPledgeModal() {
      openModal('pledgeModal');

      // Handle pledge signing
      document.getElementById('signPledge').onclick = () => {
        const pledgeCount = parseInt(localStorage.getItem('pledgeCount') || '0') + 1;
        localStorage.setItem('pledgeCount', pledgeCount);
        localStorage.setItem('userPledged', 'true');
        closeModal('pledgeModal');

        // Show success message
        setTimeout(() => {
          alert('Thank you for taking the pledge! You are part of the solution now. üå±');
        }, 300);
      };
    }

    function showShareModal() {
      openModal('shareModal');
    }

    function shareWhatsApp() {
      const text = encodeURIComponent('Did you know our college hostels waste 20-40kg of food daily? That\'s 80-160 meals! Let\'s take action together. üå±');
      window.open(`https://wa.me/?text=${text}`, '_blank');
    }

    function shareTwitter() {
      const text = encodeURIComponent('College hostel food waste: 20-40kg daily = 80-160 meals wasted! Time to take action. üçΩÔ∏è‚ôªÔ∏è');
      window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
    }

    function copyLink() {
      navigator.clipboard.writeText(window.location.href).then(() => {
        alert('Link copied to clipboard! Share it with your friends. üì±');
      });
    }

    // Auto-update wastage data every 30 seconds to simulate real-time data
    setInterval(() => {
      document.querySelectorAll('.hostel-wastage-card').forEach(card => {
        const valueElement = card.querySelector('.wastage-value');
        if (valueElement) {
          const currentValue = parseFloat(valueElement.textContent);
          const newValue = 20 + Math.random() * 20;
          valueElement.textContent = newValue.toFixed(1);

          // Update level indicator
          const level = newValue > 30 ? 'high' : newValue > 25 ? 'medium' : 'low';
          const indicator = card.querySelector('.wastage-indicator');
          if (indicator) {
            indicator.className = `wastage-indicator ${level}`;
            const levelText = card.querySelector('.wastage-level');
            if (levelText) {
              levelText.textContent = level.charAt(0).toUpperCase() + level.slice(1) + ' Wastage';
            }
          }

          // Update meals count
          const mealsElement = card.querySelector('.meals-count');
          if (mealsElement) {
            mealsElement.textContent = `‚âà ${(newValue * 4).toFixed(0)} meals/day`;
          }
        }
      });
      updateDailyMeals();
    }, 30000);

    // Initialize everything when page loads
    window.addEventListener('DOMContentLoaded', () => {
      generateHostelCards();
      startCounters();
      initializeTimeLapseChart();
      setupCalculator();
    });

    // Redraw chart on window resize
    window.addEventListener('resize', () => {
      initializeTimeLapseChart();
    });
  </script>
</body>
</html>